### **網路偵查與掃描**

網路偵查與掃描是駭客入侵過程中的關鍵步驟，通常被認為是滲透測試或攻擊的初步階段。這一階段的目的是通過收集目標系統或網絡的資訊來尋找潛在的弱點或漏洞。駭客通過各種工具和技術，對目標系統進行全面的偵查，從而為後續的攻擊做準備。理解網路偵查與掃描的原理及方法對於提升防禦能力至關重要。

---

#### **1. 網路偵查概述**

網路偵查是指駭客收集目標系統和網絡結構的信息，以便於制定攻擊策略。這個階段可以分為**主動偵查**和**被動偵查**兩種方法。

- **主動偵查（Active Reconnaissance）**：駭客直接與目標系統進行交互，發送請求或探測包來獲取更多的數據。這種方式通常更容易被防禦系統發現，但可以獲得更多詳細信息。
- **被動偵查（Passive Reconnaissance）**：駭客不與目標系統直接交互，而是從公開資源中收集資料（例如DNS記錄、Whois查詢、網站內容等）。被動偵查的優勢在於難以被察覺，但通常能夠收集的信息較為有限。

網路偵查的目標通常包括：
- 獲取目標的IP地址範圍、網絡拓撲結構
- 確認開放的端口、運行的服務和版本
- 獲取與目標相關的公開信息（例如域名、員工名單等）

---

#### **2. 網路掃描概述**

網路掃描是利用特定工具來自動化偵查過程，掃描目標網絡以識別設備、服務、端口等資訊。掃描可幫助駭客獲得更具體的攻擊路徑，並發現潛在的漏洞。根據掃描的對象和目的，網路掃描可以分為以下幾種類型：

- **端口掃描（Port Scanning）**：端口掃描是用來識別目標設備開放的端口。駭客可以通過端口掃描來發現哪些服務在運行，並根據服務版本信息來決定是否存在已知漏洞。
  - 常用工具：Nmap、Masscan
  - 端口掃描常見技術：
    - **TCP掃描**：檢測TCP端口是否開放，通過發送TCP SYN封包來探測。
    - **UDP掃描**：檢測UDP端口是否開放，UDP不像TCP有三次握手，因此UDP掃描更難實現。
    - **FIN掃描**：發送FIN封包來識別端口狀態，這是一種較為隱蔽的掃描方式。
  
- **服務版本掃描（Service Version Scanning）**：服務版本掃描不僅識別開放的端口，還會識別運行在這些端口上的具體服務及其版本。駭客可以根據這些版本信息進行漏洞分析。
  - 常用工具：Nmap、Nessus
  - 例如：識別出運行在端口80上的Apache 2.4.41，駭客可利用已知的漏洞進行攻擊。

- **操作系統識別（OS Fingerprinting）**：這是指駭客通過對目標設備的行為進行分析，推斷其運行的操作系統。這有助於駭客針對特定操作系統的漏洞進行攻擊。
  - 常用工具：Nmap（使用`-O`參數進行操作系統識別）

- **Web應用掃描（Web Application Scanning）**：駭客通過掃描Web應用來查找漏洞，常見的Web應用漏洞包括SQL注入、XSS、文件上傳漏洞等。
  - 常用工具：OWASP ZAP、Nikto、Burp Suite

- **漏洞掃描（Vulnerability Scanning）**：漏洞掃描工具會對目標進行全面掃描，尋找已知漏洞，並根據漏洞的危害性提供修復建議。漏洞掃描工具會基於已知的漏洞庫進行比對，識別目標系統中存在的安全漏洞。
  - 常用工具：Nessus、Qualys、OpenVAS

---

#### **3. 常見的偵查與掃描工具**

1. **Nmap**：Nmap是最廣泛使用的網絡掃描工具，能夠進行端口掃描、服務版本識別、操作系統識別等多種功能。它還支持腳本引擎，可以進行更深層的漏洞掃描。
   - 例子：`nmap -sS -p 1-65535 <target>` （進行TCP端口掃描）

2. **Wireshark**：Wireshark是一款強大的網絡封包分析工具，能夠捕獲和分析網絡中的數據包，幫助駭客了解網絡流量並發現弱點。Wireshark通常用於對流量進行深入分析，尤其在偵查階段有重要作用。

3. **Nikto**：Nikto是針對Web服務的漏洞掃描工具，可以快速檢測Web服務中存在的各種已知漏洞，如XSS、SQL注入等。

4. **Metasploit**：Metasploit是一個開源的滲透測試框架，除了漏洞利用，它還提供了掃描工具和模塊，幫助駭客快速發現並利用目標系統中的漏洞。

5. **Burp Suite**：Burp Suite是一個功能強大的Web應用安全測試工具，常用於進行Web應用掃描、漏洞檢測、代理攔截等操作。

6. **Shodan**：Shodan是搜索引擎，專門用來搜索與互聯網連接的設備。駭客可以使用Shodan搜尋開放端口、漏洞信息和設備配置。

7. **Nessus**：Nessus是一個專業的漏洞掃描工具，主要用來發現系統和網絡中的安全漏洞，並提供漏洞修補建議。

---

#### **4. 防禦策略**

針對網絡偵查與掃描的防禦策略，組織可以採取以下幾個關鍵措施：

1. **入侵檢測系統（IDS）和入侵防禦系統（IPS）**：利用IDS/IPS來監控和分析網絡流量，偵測並防止異常的掃描行為或攻擊行為。
  
2. **網絡分段與隔離**：將內部網絡和外部網絡進行分隔，限制內部網絡的可見範圍，從而降低偵查的成功率。

3. **端口隱藏與過濾**：關閉不必要的端口，並使用防火牆進行端口過濾，阻止未經授權的掃描和探測。

4. **加密通信**：對網絡中的敏感信息進行加密，即使攻擊者獲取流量，也無法輕易解析出有價值的數據。

5. **反掃描技術**：利用反掃描技術，例如迷惑性的數據包回應，來迷惑攻擊者，使其難以識別真實的服務和設備。

6. **強化Web應用安全**：對Web應用進行漏洞測試，修補已知漏洞，並加強對SQL注入、XSS等常見漏洞的防禦。

---

#### **總結**

網絡偵查與掃描是駭客攻擊過程中的重要步驟，通過這一階段，駭客能夠收集大量關於目標系統的資訊，從而制定出有效的攻擊策略。了解這些偵查與掃描技術及其防範措施，有助於組織加強系統的防禦，避免成為攻擊的目標。