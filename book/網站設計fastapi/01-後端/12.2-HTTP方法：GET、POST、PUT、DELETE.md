### **12.2 HTTP 方法：GET、POST、PUT、DELETE**

在 RESTful API 中，HTTP 方法（也稱為 HTTP 動詞）是用來指定對資源進行操作的基本方式。這些方法定義了如何與資源交互，並且它們在設計 API 時至關重要。下面將詳細介紹 `GET`、`POST`、`PUT` 和 `DELETE` 四種常見的 HTTP 方法，它們是 Web 開發中最基礎的動作。

---

### **12.2.1 GET 方法**

#### **概述**
`GET` 方法是用來從服務器獲取資料的。它是一個無副作用的方法，即它不會修改資源的狀態。`GET` 請求通常是用來查詢資源的，並返回資源的表示。

#### **使用場景**
- 獲取單一資源：例如，查詢某個用戶的資料。
- 獲取資源集合：例如，列出所有用戶、所有訂單等。

#### **例子**
- `GET /users`：獲取所有用戶的信息。
- `GET /users/{id}`：根據用戶 ID 獲取某個具體用戶的信息。
- `GET /posts`：獲取所有帖子的信息。

#### **返回值**
`GET` 請求的響應通常包含一個資源的表示，通常是 JSON 或 XML 格式，並且返回狀態碼 `200 OK`。

```json
{
  "id": 1,
  "name": "Alice",
  "email": "alice@example.com"
}
```

---

### **12.2.2 POST 方法**

#### **概述**
`POST` 方法用來創建新的資源，並將資源的數據發送到服務器。與 `GET` 方法不同，`POST` 請求可能會對資源進行修改或創建新資源，因此它是一個有副作用的方法。

#### **使用場景**
- 創建新資源：例如，創建一個新的用戶或一個新的帖子。
- 提交表單數據：例如，註冊一個新帳戶。

#### **例子**
- `POST /users`：創建一個新的用戶。
- `POST /posts`：創建一個新的帖子。

#### **返回值**
`POST` 請求的響應通常會返回創建的資源的詳細信息，並且狀態碼一般為 `201 Created`。如果需要，響應中也可以包含新創建資源的 URI（例如，`Location` 標頭）。

```json
{
  "id": 101,
  "title": "New Post",
  "content": "This is a new blog post"
}
```

---

### **12.2.3 PUT 方法**

#### **概述**
`PUT` 方法用來更新已有的資源。當客戶端發送 `PUT` 請求時，請求正文通常包含要更新的資源的完整表示，服務器會用新資料來替換現有資源。

#### **使用場景**
- 更新已有資源：例如，更新某個用戶的詳細信息或更新某篇帖子的內容。
- 全量更新：`PUT` 用於全量更新資源，即請求體中的資源會完全替代原有的資源。

#### **例子**
- `PUT /users/{id}`：根據用戶 ID 更新指定用戶的信息。
- `PUT /posts/{id}`：根據帖子 ID 更新指定帖子的內容。

#### **返回值**
`PUT` 請求的響應通常包含更新後的資源，並返回狀態碼 `200 OK` 或 `204 No Content`（如果不需要返回資源）。

```json
{
  "id": 1,
  "name": "Alice",
  "email": "new-email@example.com"
}
```

如果不返回資源內容，可以只返回狀態碼 `204`：
```plaintext
HTTP/1.1 204 No Content
```

---

### **12.2.4 DELETE 方法**

#### **概述**
`DELETE` 方法用來刪除指定資源。當發送 `DELETE` 請求時，服務器應該刪除指定的資源並返回相應的狀態碼。

#### **使用場景**
- 刪除資源：例如，刪除一個用戶或刪除一篇帖子。

#### **例子**
- `DELETE /users/{id}`：刪除指定 ID 的用戶。
- `DELETE /posts/{id}`：刪除指定 ID 的帖子。

#### **返回值**
`DELETE` 請求的響應通常是狀態碼 `200 OK` 或 `204 No Content`。如果刪除操作成功，可能不需要返回任何內容，因此 `204 No Content` 是常見的返回狀態。

```plaintext
HTTP/1.1 204 No Content
```

---

### **12.2.5 總結與最佳實踐**

#### **常見 HTTP 方法及其用途**
- `GET`：查詢資源（無副作用，安全）。
- `POST`：創建資源（有副作用）。
- `PUT`：更新資源（全量更新）。
- `DELETE`：刪除資源（有副作用）。

#### **設計 RESTful API 時的最佳實踐**
1. **語義化 URI**：資源應該通過有意義的 URI 進行標識。
2. **適當使用 HTTP 方法**：使用 `GET` 來查詢資源，`POST` 創建資源，`PUT` 更新資源，`DELETE` 刪除資源。
3. **無狀態設計**：每個請求應該是自包含的，不依賴於前一次的請求狀態。
4. **清晰的錯誤處理**：使用標準的 HTTP 狀態碼來描述錯誤情況，並提供詳細的錯誤信息。

通過遵循這些最佳實踐，可以設計出更加高效、可維護且易於使用的 RESTful API，使前端和後端之間的交互更加流暢。